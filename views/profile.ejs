<%- include('templates/loggedHeader') %>

    <main>
        <div class="profile-container">
            <!-- Profile Picture -->
            <div class="profile-pic">
                <img id="profilePic" src="<%= user.profilePic || '/uploads/default.jpg' %>" alt="Profile Picture">
                <form id="profilePicForm" action="/profile/upload" method="POST" enctype="multipart/form-data">
                    <input type="file" id="profilePicInput" name="profilePic" accept="image/*">
                    <button type="submit">Upload</button>
                </form>
                
                <p id="uploadMessage"></p>
            </div>

            <!-- Profile Info -->
            <div class="profile-info">
                <h2>User Profile</h2>
                <p><strong>Username:</strong> <span id="username">
                        <%= user.username %>
                    </span></p>
                <p><strong>Email:</strong> <span id="email">
                        <%= user.email %>
                    </span></p>
                <!-- <p><strong>Neighborhood:</strong> <span id="neighbourhood">
                        <%= user.neighbourhood %>
                    </span></p> -->
                <p>
                    <strong>Neighborhood:</strong>
                    <input
                        id="neighbourhoodInput"
                        type="text"
                        placeholder="Search your neighbourhood…"
                        value="<%= user.neighbourhood %>"
                    />
                    <button id="saveNeighborhood">Save</button>
                </p>

                <!-- hidden map for the geocoder control -->
                <div id="geocode-map" style="height:0; visibility:hidden;"></div>

            </div>
        </div>

        <section id="comments">
            <h2>My Comments</h2>
            <div id="comments-list">Loading comments…</div>
        </section>

        <section id="posts">
            <h2>My Posts</h2>
            <div id="posts-list">Loading posts…</div>
        </section>
    </main>

    <!-- <script src="/scripts/profile.js" type="module"></script> -->

    <%- include('templates/loggedFooter') %>
